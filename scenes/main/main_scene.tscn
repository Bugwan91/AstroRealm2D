[gd_scene load_steps=23 format=3 uid="uid://fn4ucxsb1i6t"]

[ext_resource type="Script" path="res://scenes/main/scripts/main_scene.gd" id="1_2ehlx"]
[ext_resource type="PackedScene" uid="uid://cxdkw4g14655c" path="res://scenes/background/background.tscn" id="1_b53p2"]
[ext_resource type="PackedScene" uid="uid://ce1dw618jykrb" path="res://scenes/ship/ship.tscn" id="4_5rllk"]
[ext_resource type="PackedScene" uid="uid://csufvxpfo8jbl" path="res://scenes/navigation_grid/grid.tscn" id="4_aip35"]
[ext_resource type="Environment" uid="uid://chl1sjnqh1sa7" path="res://scenes/main/main_environment.tres" id="4_h5iwh"]
[ext_resource type="PackedScene" uid="uid://f787xuov3u4t" path="res://scenes/gun/gun.tscn" id="8_cwv63"]
[ext_resource type="PackedScene" uid="uid://3cqmtymu5w3p" path="res://scenes/ui/ui.tscn" id="8_myah8"]
[ext_resource type="Script" path="res://scenes/ai/scripts/ship_input.gd" id="9_nd6tp"]
[ext_resource type="Shader" path="res://scenes/navigation_grid/shaders/grid.gdshader" id="10_7ps0f"]
[ext_resource type="Script" path="res://scenes/ui/scripts/radar_viewport.gd" id="10_nsy5m"]
[ext_resource type="PackedScene" uid="uid://sgnvwpsrs0xa" path="res://scenes/camera/camera.tscn" id="11_2fp23"]
[ext_resource type="PackedScene" uid="uid://dt7wav32bva3j" path="res://scenes/player/input_reader.tscn" id="13_epig2"]
[ext_resource type="Script" path="res://scenes/ship/scripts/health.gd" id="14_cmupl"]
[ext_resource type="PackedScene" uid="uid://dc0s2khypwfnm" path="res://scenes/ship/pointer.tscn" id="15_5xucn"]
[ext_resource type="PackedScene" uid="uid://hhj5ip7is6r4" path="res://scenes/ship/radar.tscn" id="15_ln8xj"]

[sub_resource type="Gradient" id="Gradient_owpx4"]
offsets = PackedFloat32Array(0, 0.686529)
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_3cj2f"]
gradient = SubResource("Gradient_owpx4")
width = 512
height = 512
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="Gradient" id="Gradient_2be3f"]
offsets = PackedFloat32Array(0, 0.746063)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_njkiq"]
gradient = SubResource("Gradient_2be3f")
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bh3nw"]
shader = ExtResource("10_7ps0f")
shader_parameter/scale = Vector2(4, 4)
shader_parameter/opacity = 0.031
shader_parameter/offset = Vector2(0, 0)
shader_parameter/emission = Color(0, 0.301961, 1, 1)
shader_parameter/mask = SubResource("GradientTexture2D_njkiq")

[sub_resource type="Gradient" id="Gradient_fkijs"]
interpolation_mode = 2
offsets = PackedFloat32Array(0.633987, 0.703704, 0.708061)
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_4qutk"]
gradient = SubResource("Gradient_fkijs")
width = 1024
height = 1024
fill = 1
fill_from = Vector2(0.5, 0.5)

[node name="Main" type="Node2D"]
script = ExtResource("1_2ehlx")
ship_scene = ExtResource("4_5rllk")
gun_scene = ExtResource("8_cwv63")
radar_scene = ExtResource("15_ln8xj")

[node name="Background" parent="." instance=ExtResource("1_b53p2")]
unique_name_in_owner = true

[node name="UI" parent="." instance=ExtResource("8_myah8")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("4_h5iwh")

[node name="InputReader" parent="." instance=ExtResource("13_epig2")]
unique_name_in_owner = true

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
position = Vector2(-330, -177)
rotation = -1.20638
energy = 0.99
blend_mode = 2
shadow_enabled = true
height = 0.05

[node name="PointLight2D" type="PointLight2D" parent="." groups=["shiftable"]]
position = Vector2(-40, -358)
color = Color(1, 0.6, 0, 1)
texture = SubResource("GradientTexture2D_3cj2f")
texture_scale = 5.0

[node name="Grid" parent="." node_paths=PackedStringArray("camera") instance=ExtResource("4_aip35")]
light_mask = 0
material = SubResource("ShaderMaterial_bh3nw")
base_opacity = 0.01
speed_limit = 7000.0
camera = NodePath("../Camera")

[node name="RadarViewport" type="Node2D" parent="Grid"]
modulate = Color(1, 0, 0.3, 0.1)
script = ExtResource("10_nsy5m")

[node name="Outline" type="Sprite2D" parent="Grid/RadarViewport"]
modulate = Color(0, 0.5, 1, 0.8)
texture = SubResource("GradientTexture2D_4qutk")

[node name="Camera" parent="." instance=ExtResource("11_2fp23")]
zoom = Vector2(1, 1)
zoom_min = 0.2

[node name="AutopilotPointer" parent="." instance=ExtResource("15_5xucn")]
unique_name_in_owner = true
in_range_color = Color(0, 0, 1, 0.78)
out_range_color = Color(0, 0, 0.486275, 0.784314)

[node name="TargetPointer" parent="." instance=ExtResource("15_5xucn")]
unique_name_in_owner = true
in_range_color = Color(1, 0, 0, 0.2)
out_range_color = Color(0.49, 0, 0, 0.2)

[node name="ShootPointer" parent="." instance=ExtResource("15_5xucn")]
unique_name_in_owner = true
in_range_color = Color(1, 1, 0, 0.1)
out_range_color = Color(0.49, 0.49, 0, 0.1)

[node name="ShipEnemy" parent="." node_paths=PackedStringArray("inputs", "gun") instance=ExtResource("4_5rllk")]
unique_name_in_owner = false
position = Vector2(-30000, 3000)
inputs = NodePath("AIShipInput")
gun = NodePath("Gun")
FA_accuracy = 0.92
FA_accuracy_damp = 0.2

[node name="AIShipInput" type="Node2D" parent="ShipEnemy"]
script = ExtResource("9_nd6tp")
keep_distance = 700.0

[node name="Gun" parent="ShipEnemy" instance=ExtResource("8_cwv63")]
overheat = 0.2
reload_time = 1.0

[node name="Health" type="Node" parent="ShipEnemy"]
script = ExtResource("14_cmupl")

[node name="ShipPlayer" parent="." node_paths=PackedStringArray("inputs", "gun", "autopilot_pointer", "target_prediction_pointer") instance=ExtResource("4_5rllk")]
mass = 0.5
inputs = NodePath("../InputReader")
gun = NodePath("Gun")
max_speed = 2100.0
FA_accuracy = 0.93
autopilot_pointer = NodePath("../AutopilotPointer")
target_prediction_pointer = NodePath("../TargetPointer")

[node name="Gun" parent="ShipPlayer" instance=ExtResource("8_cwv63")]
overheat = 0.0

[node name="Health" type="Node" parent="ShipPlayer"]
script = ExtResource("14_cmupl")

[node name="Radar" parent="ShipPlayer" instance=ExtResource("15_ln8xj")]
visible = false
