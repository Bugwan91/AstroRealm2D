[gd_scene load_steps=22 format=3 uid="uid://tulgf6ok78fw"]

[ext_resource type="Script" path="res://scenes/ship_designer/ship_baker_full.gd" id="1_hhwno"]
[ext_resource type="Texture2D" uid="uid://brtabr5lpm864" path="res://assets/spaceships/Styles/01.png" id="2_pcliy"]
[ext_resource type="Texture2D" uid="uid://beiifo51ge66s" path="res://assets/spaceships/Vinok/vinok.png" id="3_maayq"]
[ext_resource type="Texture2D" uid="uid://bijxh17x7euan" path="res://assets/spaceships/_Modules/Cocpit/Mk4/Mk4.png" id="4_5j5pw"]
[ext_resource type="Texture2D" uid="uid://c6ymalwy60y6y" path="res://assets/spaceships/_Modules/Engines/Mk1/mk1.png" id="5_l04mt"]
[ext_resource type="Texture2D" uid="uid://uvv3ypib7fim" path="res://assets/spaceships/Vinok/vinok_emission.png" id="6_k4i8b"]
[ext_resource type="Texture2D" uid="uid://226xm03fb0m1" path="res://assets/spaceships/_Modules/Cocpit/Mk4/Mk4_emission.png" id="7_40ai5"]
[ext_resource type="Texture2D" uid="uid://fr3dcuwrb8wu" path="res://assets/spaceships/_Modules/Engines/Mk1/mk1_emission.png" id="8_6m00v"]
[ext_resource type="Texture2D" uid="uid://bpk7twvn3ts7g" path="res://assets/spaceships/Vinok/vinok_mask.png" id="9_n28h3"]
[ext_resource type="Texture2D" uid="uid://broadrkr3u6ot" path="res://assets/spaceships/_Modules/Cocpit/Mk4/Mk4_mask.png" id="10_fvtd0"]
[ext_resource type="Texture2D" uid="uid://cmy8oymcuhmmb" path="res://assets/spaceships/_Modules/Engines/Mk1/mk1_mask.png" id="11_44j37"]
[ext_resource type="Texture2D" uid="uid://bvq2yubuqfrwx" path="res://assets/spaceships/Vinok/vinok_normal.png" id="12_pgh2e"]
[ext_resource type="Texture2D" uid="uid://dnkthbwaxvmgc" path="res://assets/spaceships/_Modules/Cocpit/Mk4/Mk4_poly_n.png" id="13_amxkf"]
[ext_resource type="Texture2D" uid="uid://cnk8pw73e1b5a" path="res://assets/spaceships/_Modules/Engines/Mk1/mk1_normal_1.png" id="14_7yh2b"]
[ext_resource type="Texture2D" uid="uid://cs1hhm1haxg2e" path="res://assets/spaceships/Vinok/vinok_spec.png" id="15_hoyyg"]
[ext_resource type="Texture2D" uid="uid://iwlmwkjscuyu" path="res://assets/spaceships/_Modules/Cocpit/Mk4/Mk4_spec.png" id="16_d1xt7"]
[ext_resource type="Texture2D" uid="uid://g8jl0iaaxegj" path="res://assets/spaceships/_Modules/Engines/Mk1/mk1_spec.png" id="17_a57x4"]

[sub_resource type="Shader" id="Shader_8fl5i"]
code = "shader_type canvas_item;

uniform sampler2D mask_texture : hint_default_transparent;
uniform sampler2D style_texture : hint_default_transparent;

void fragment() {
	vec4 ship_color = texture(TEXTURE, UV);
	vec4 style_color = texture(style_texture, UV);
	vec4 mask_value = texture(mask_texture, UV);
	if (mask_value.r > 0.0) {
		COLOR = ship_color * style_color * mask_value.r;
	} else {
		COLOR = ship_color;
	}
}"
metadata/_edit_res_path = "res://scenes/ship_designer/baker.tscn::Shader_8fl5i"

[sub_resource type="ViewportTexture" id="ViewportTexture_b86fw"]
viewport_path = NodePath("Control/HBoxContainer/Style/MaskBaker")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_sayty"]
shader = SubResource("Shader_8fl5i")
shader_parameter/mask_texture = SubResource("ViewportTexture_b86fw")
shader_parameter/style_texture = ExtResource("2_pcliy")

[sub_resource type="ViewportTexture" id="ViewportTexture_bwhy0"]
viewport_path = NodePath("Control/HBoxContainer/Base/BaseBaker")

[node name="Baker" type="Node"]
script = ExtResource("1_hhwno")
filename = "Vinok"
style = ExtResource("2_pcliy")

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0

[node name="HBoxContainer" type="HBoxContainer" parent="Control"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Base" type="SubViewportContainer" parent="Control/HBoxContainer"]
layout_mode = 2

[node name="BaseBaker" type="SubViewport" parent="Control/HBoxContainer/Base"]
unique_name_in_owner = true
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(128, 128)
render_target_update_mode = 4

[node name="CanvasLayer" type="CanvasLayer" parent="Control/HBoxContainer/Base/BaseBaker"]

[node name="hull_view" type="Node2D" parent="Control/HBoxContainer/Base/BaseBaker/CanvasLayer"]
position = Vector2(64, 64)

[node name="hull" type="Sprite2D" parent="Control/HBoxContainer/Base/BaseBaker/CanvasLayer/hull_view"]
texture = ExtResource("3_maayq")

[node name="cocpit" type="Sprite2D" parent="Control/HBoxContainer/Base/BaseBaker/CanvasLayer/hull_view"]
position = Vector2(0, -32)
texture = ExtResource("4_5j5pw")

[node name="engine" type="Sprite2D" parent="Control/HBoxContainer/Base/BaseBaker/CanvasLayer/hull_view"]
position = Vector2(0, 32)
texture = ExtResource("5_l04mt")

[node name="Emission" type="SubViewportContainer" parent="Control/HBoxContainer"]
layout_mode = 2

[node name="EmissionBaker" type="SubViewport" parent="Control/HBoxContainer/Emission"]
unique_name_in_owner = true
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(128, 128)
render_target_clear_mode = 1
render_target_update_mode = 4

[node name="CanvasLayer" type="CanvasLayer" parent="Control/HBoxContainer/Emission/EmissionBaker"]

[node name="mask_view" type="Node2D" parent="Control/HBoxContainer/Emission/EmissionBaker/CanvasLayer"]
texture_filter = 1
position = Vector2(64, 64)

[node name="hull" type="Sprite2D" parent="Control/HBoxContainer/Emission/EmissionBaker/CanvasLayer/mask_view"]
texture = ExtResource("6_k4i8b")

[node name="cocpit" type="Sprite2D" parent="Control/HBoxContainer/Emission/EmissionBaker/CanvasLayer/mask_view"]
position = Vector2(0, -32)
texture = ExtResource("7_40ai5")

[node name="engine" type="Sprite2D" parent="Control/HBoxContainer/Emission/EmissionBaker/CanvasLayer/mask_view"]
position = Vector2(0, 32)
texture = ExtResource("8_6m00v")

[node name="Style" type="SubViewportContainer" parent="Control/HBoxContainer"]
layout_mode = 2

[node name="MaskBaker" type="SubViewport" parent="Control/HBoxContainer/Style"]
unique_name_in_owner = true
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(128, 128)
render_target_update_mode = 4

[node name="CanvasLayer" type="CanvasLayer" parent="Control/HBoxContainer/Style/MaskBaker"]

[node name="mask_view" type="Node2D" parent="Control/HBoxContainer/Style/MaskBaker/CanvasLayer"]
texture_filter = 1
position = Vector2(64, 64)

[node name="hull" type="Sprite2D" parent="Control/HBoxContainer/Style/MaskBaker/CanvasLayer/mask_view"]
texture = ExtResource("9_n28h3")

[node name="cocpit" type="Sprite2D" parent="Control/HBoxContainer/Style/MaskBaker/CanvasLayer/mask_view"]
position = Vector2(0, -32)
texture = ExtResource("10_fvtd0")

[node name="engine" type="Sprite2D" parent="Control/HBoxContainer/Style/MaskBaker/CanvasLayer/mask_view"]
position = Vector2(0, 32)
texture = ExtResource("11_44j37")

[node name="Normal" type="SubViewportContainer" parent="Control/HBoxContainer"]
layout_mode = 2

[node name="NormalBaker" type="SubViewport" parent="Control/HBoxContainer/Normal"]
unique_name_in_owner = true
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(128, 128)
render_target_clear_mode = 1
render_target_update_mode = 4

[node name="CanvasLayer" type="CanvasLayer" parent="Control/HBoxContainer/Normal/NormalBaker"]

[node name="mask_view" type="Node2D" parent="Control/HBoxContainer/Normal/NormalBaker/CanvasLayer"]
texture_filter = 1
position = Vector2(64, 64)

[node name="hull" type="Sprite2D" parent="Control/HBoxContainer/Normal/NormalBaker/CanvasLayer/mask_view"]
texture = ExtResource("12_pgh2e")

[node name="cocpit" type="Sprite2D" parent="Control/HBoxContainer/Normal/NormalBaker/CanvasLayer/mask_view"]
position = Vector2(0, -32)
texture = ExtResource("13_amxkf")

[node name="engine" type="Sprite2D" parent="Control/HBoxContainer/Normal/NormalBaker/CanvasLayer/mask_view"]
position = Vector2(0, 32)
texture = ExtResource("14_7yh2b")

[node name="Specular" type="SubViewportContainer" parent="Control/HBoxContainer"]
layout_mode = 2

[node name="SpeculatBaker" type="SubViewport" parent="Control/HBoxContainer/Specular"]
unique_name_in_owner = true
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(128, 128)
render_target_clear_mode = 1
render_target_update_mode = 4

[node name="CanvasLayer" type="CanvasLayer" parent="Control/HBoxContainer/Specular/SpeculatBaker"]

[node name="mask_view" type="Node2D" parent="Control/HBoxContainer/Specular/SpeculatBaker/CanvasLayer"]
texture_filter = 1
position = Vector2(64, 64)

[node name="hull" type="Sprite2D" parent="Control/HBoxContainer/Specular/SpeculatBaker/CanvasLayer/mask_view"]
texture = ExtResource("15_hoyyg")

[node name="cocpit" type="Sprite2D" parent="Control/HBoxContainer/Specular/SpeculatBaker/CanvasLayer/mask_view"]
position = Vector2(0, -32)
texture = ExtResource("16_d1xt7")

[node name="engine" type="Sprite2D" parent="Control/HBoxContainer/Specular/SpeculatBaker/CanvasLayer/mask_view"]
position = Vector2(0, 32)
texture = ExtResource("17_a57x4")

[node name="Final" type="SubViewportContainer" parent="Control/HBoxContainer"]
layout_mode = 2

[node name="Stylizator" type="SubViewport" parent="Control/HBoxContainer/Final"]
unique_name_in_owner = true
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(128, 128)
render_target_update_mode = 4

[node name="CanvasLayer" type="CanvasLayer" parent="Control/HBoxContainer/Final/Stylizator"]

[node name="ShipStylization" type="Node2D" parent="Control/HBoxContainer/Final/Stylizator/CanvasLayer"]
position = Vector2(64, 64)

[node name="StylizatorView" type="Sprite2D" parent="Control/HBoxContainer/Final/Stylizator/CanvasLayer/ShipStylization"]
unique_name_in_owner = true
material = SubResource("ShaderMaterial_sayty")
texture = SubResource("ViewportTexture_bwhy0")
